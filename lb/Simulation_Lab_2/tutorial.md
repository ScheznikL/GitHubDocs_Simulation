# Комп'ютерні системи імітаційного моделювання
## Лабораторна робота №2. Редагування імітаційних моделей у середовищі NetLogo

<br>

### 2.1 Мета роботи
Отримати уявлення про синтаксис та можливості мови мультиагентного імітаційного моделювання NetLogo.  
Навчитися вносити зміни до вихідного коду готових моделей з різних предметних областей, які пропонуються середовищем NetLogo.

<br>

### 2.2 Необхідні засоби
Для виконання лабораторної роботи знадобиться:
- відкрите середовище мультиагентного моделювання **NetLogo**. Якщо варіант завдання передбачає внесення змін до інтерфейсу управління моделюванням, то буде потрібна робота з встановленою десктопною версією.
- для опису роботи використовується файл у форматі **md**, що розміщується у складі репозиторію лабораторної роботи на сервісі GitHub. *Для зручності локальної роботи з md-розміткою доцільно використовувати редактори коду, такі як MS Visual Studio Code або будь-який інший, знайомий користувачеві. У разі локальної роботи з підготовки md-файлу, знадобиться встановлена СКВ Git.*
- для роботи з веб-версією NetLogo та сервісом GitHub буде потрібно доступ до мережі Інтернет.

<br>

### 2.3 Порядок виконання роботи
Лабораторна робота полягає у корекції внутрішньої логіки зміни стану тієї самої моделі, з якою вже ознайомилися під час виконання попередньої лабораторної, що була присвячена [опису імітаційних моделей](..\Simulation_Lab1\tutorial.md). Тепер необхідно:
1. Сумлінно **ознайомитись** з вихідним кодом, що описує логіку зміни стану моделі. У веб-версії NetLogo код доступний у секції "NetLogo Code".
2. **Внести зміни** у логіку роботи моделі, згідно **варіанту**. 
3. **Внести зміни** у логіку роботи моделі, згідно **власного розсуду**. Пам'ятайте, що реалізація змін не повинна порушувати загальну логіку моделі та призводити до її неадекватності об'єкту імітаційного моделювання.
4. Провести **обчислювальний експеримент**, на власний вибір, за аналогією з вже проведеними дослідженнями з відповідної [лабораторної](..\Simulation_Lab1\tutorial.md). Достатньо одного експерименту, що продемонструє, як зміна логіки вплинула на характер **залежності** показників роботи моделі від керуючих параметрів.
5. Підготувати (у форматі md) **опис внесених змін моделі та проведеного обчислювального експерименту**. Репозиторій, окрім цього опису, повинен містити також **nlogo-файл** редагованої моделі, який можна отримати шляхом експорту у веб-версії (якщо усі внесені зміни не передбачали роботи з інтерфейсом користувача), або при збережені зміненої моделі при використанні десктопної версії NetLogo.

<br>

### 2.4 Варіанти завдань
Наведено перелік моделей (варіанти співпадають із тими, що були на лабораторній роботі, яка присвячена опису та використанню моделей) та необхідні зміни. Зверніть увагу, що, згідно пункту 3 у розділі 2.3, окрім описаних змін, необхідно додати також щось своє, на власний розсуд.  
Модель для роботи обирається згідно свого варіанту, **вказаним викладачем**.  
1. [Traffic Grid](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Social%20Science/Traffic%20Grid.nlogo). Додати жовтий сигнал світлофорів. Додати вірогідність початку руху водіями не тільки на зелений, але і на жовтий сигнал світлофора.<!-- Для жовтого, тривалість буде регулюватися за допомогою нового керуючого параметру. Рахувати "поганих" водіїв, чи вказувати, замість вірогідности загальної, просто створення таких водіїв, які завжди починають рух на жовтому. Можно імітувати початок рух на жовтий, якщо водій "не бачить" нікого на перехресті. -->
2. [Climate Change](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Earth%20Science/Climate%20Change.nlogo). Додати можливість вказівки початкової кількості хмар. Додати зміну кута падіння нових сонячних промінів протягом часу (це дозволить імітувати зміну положення сонця протягом доби).<!-- Уже готовый add-cloud и через repeat. Угол падения - утсанавливается в процедуре create-sunshine. Можливість регулювати кут падіння, встановлюючи початкове значення (це дасть змогу досліджувати, як буде змінюватись температура на разній широті - сонце ж не тільки протягом доби змінює своє положення, но і на разній широті досягає різних кутів). Регулювати шільність хмар? -->
3. [Virus](https://www.netlogoweb.org/launch#https://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Virus.nlogo). Додати вплив віку на інфікування та результат захворювання. Додати вплив ступеня поширення захворювання (поточного відсотка інфікованих) на вірогідність появи нових агентів. Додати можливість регулювання тривалості імунітету та вірогідності захворіти повторно. <!-- Простая модель для понимания, с массой возможностей для расширения, пачка идей для которого описаны в самой модели... Время жизни у всех в одном пределе, до 50 лет (lifespan). Можно бы регулировать. Возраст (age) у каждого свой, но он не влияет на процесс заражения/выздоровления. Регулирование длительности иммунитета. И его "прочности". Коррекция логики размножения. -->
4. [Urban Suite - Pollution](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Curricular%20Models/Urban%20Suite/Urban%20Suite%20-%20Pollution.nlogo). Реалізувати позитивний вплив наявності на імітаційному полі електростанцій на вірогідність появи нових людей. Збільшити вірогідність висадки дерев у клітинах поблизу електростанцій. <!-- Электростанции влияют только на загрязнение, но они ведь явно что-то хорошее несут, стоит это в логике отразить. Удобно сие сделать через ввод нового параметра для патчей и работать через "соседей" клетки с электростанцией. -->
5. [Fire Simple Extension 2](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/IABM%20Textbook/chapter%203/Fire%20Extensions/Fire%20Simple%20Extension%202.nlogo). Додати агентів-"пожарних", кількість яких вказується користувачем. Агенти початково розміщені тільки на "пустих" клітинках (де нема дерев) випадковим чином і можуть переміщатися у випадковому напрямку, але тільки по тим плямам, що поки що не згоріли (мають зелений чи чорний колір). При зустрічі пожарними джерел розповсюдження вогню (червоних клітинок) "гасити" їх. <!-- Добавить агентов, пока эта модель вообще без них. Это могут быть "пожарные", которые рандомно перемещаются по полю, дошли до огня (красных участков) и "тушат" его - т.е. устраняют очаг заражения. Т.к. логика завязана на цвет пятен, всё сводится к изменению "красных" на иной цвет, если они оказались по сосдеству с "пжарными". Такой апдейт открывает простор для новых изменений - например, движение в сторону источника огня, вероятность успешного тушения, необходимость нескольких пожарных для успеха тушения и т.д. -->
6. [Rabbits Grass Weeds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Rabbits%20Grass%20Weeds.nlogo). Додати можливість отруїтися при поїданні бур'янів (зазначена у внутрішніх параметрах, як певна вірогідність). Захворілий кролик не може харчуватися, переміщатися і розмножуватися, позначається іншим кольором і залишається хворим на 3 такти модельного часу. Додати поділ кроликів на самців та самок. Поява нових кроликів має вимагати не тільки ситості, а й здоров'я, та присутності в одній із сусідніх клітин іншого ситого здорового кролика протилежної статі. Поява потомства відбувається із ймовірністю 50%. <!-- Эта модель успешно использовалась с прошлого года, только с более сложными апдейтами. -->
7. [Wolf Sheep Predation](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Wolf%20Sheep%20Predation.nlogo). Прибрати "зграйність" вовків - тепер перед початком свого ходу вовки повинні "оглядатися", перевіряючи оточення, та обирати напрямок руху виходячи з наявності вівець та відсутності інших вовків. Якщо немає іншої можливості – переміщається випадково. При знаходженні на одній ділянці поля двох вовків залишається лише один з них. <!-- Волки-одиночки... Это тигры какие-то. В прицнипе, как и было когда-то в этой модели. Поедать "своих" аналогом процедуры eat-sheep. Смотрят рядом только, или на заданное пользователем число клеток вперёд? Лучше не усложнять. Хотя... in-radius поможет. --> Вівці переміщаються випадковим чином, але при виявленні вовка на одній із клітин поруч змінюють напрямок на протилежний. <!-- Розмежувати овець і вовків на самців та самок. Розподіл під час ініціалізації симуляції має вказуватися користувачем. Скоригувати логіку появи нових овець та вовків - тільки ймовірності та умови "ситості" недостатньо для забезпечення адекватності моделі. Виводити користувачеві дані про склад стада та зграї, з відображенням графіків зміни кількості агентів. -->
8. [Segregation Simple Extension 1](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/IABM%20Textbook/chapter%203/Segregation%20Extensions/Segregation%20Simple%20Extension%201.nlogo). Додати можливість агенту зникнути, вірогідність чого залежить від кількості наявних поряд з ним "чужих" і кількості представників їхньої групи у їх власному оточенні. Виводити графік зміни розміру популяції. <!-- Добавить агрессию по отношению к представителям чужой группы, если рядом есть"свои". Например, при наличии вокруг "врагов", исчезать. Причем их число можно регулировать пользователем - и потом посмотреть, как влияет возможность "кучковаться" на общую популяцию. Модель дворовых разборок. -->
9. [Sheperds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Shepherds.nlogo). Поділити вівець на два різних стада, відповідно і пастухів на дві різні організації. Пастухи повинні збирати тільки "своїх" вівець. Додати відключаєму можливість збирати "чужих" вівець, які після потрапляння до нового стада змінюють свою приналежність. <!-- А если пастухи должны собирать только "своих" овец? Т.е. сделать два вида пастухов и два вида овец. Чтобы переносить пастух стал только "свою" овцу. Вариант с произвольным числом "стад"? Модель хотя не требует работы с ГУИ, но там логика завязана на код внутри графика, без десктопной версии понять будет сложнее. Можно вообще не париться с разными "породами", а решать через цветовую метку или иной внутренний параметр агента-овцы. -->
10. [Ants](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Ants.nlogo). Додати можливість вказувати кількість джерел їжі на полі. Ввести показник кількості зібраної їжі у гнізді, що відображається користувачеві. Відключаєма можливість появи нових мурах за умов наявності достатньої кількості їжі у гнізді. Відображати графік зміни кількості мурах. <!-- Додати можливість отруїтись та вмерти. А то иначе у нас будет нашествие вечных муравьев. Но в базовом варианте это будет многовато. -->
11. [Autumn](https://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Autumn.nlogo). Додати добові цикли зміни інтенсивності сонячного світла, що також повинно впливати на температуру. Тривалість модельної "доби" встановлюється у внутрішніх параметрах. <!-- В модели уйму кода, стоит это как-то компенсировать не слишком тяжёлыми изменениями, иначе на отработке на банальных вопросах по коду посыпятся. Отключаемая пользователем возможность учёта солнечных циклов? -->
12. [Muscle Development](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Muscle%20Development.nlogo). Додати у моделі вплив харчування (умовний регулюємий параметр, наприклад, "якість харчування") на можливість зростання м'язової маси. Додати регулюємі користувачем параметри, що визначають вірогідність та міру тимчасового відхилення від вказаних початкових значень інтенсивності тренувань, кількості годин сну та днів між тренуваннями. <!-- Позаимствовал идеи из описания модели. Получается просто, но точно без десктопа не обойтись. -->
13. [Fruit Wars](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Social%20Science/Economics/Fruit%20Wars.nlogo). При генерації куща, з деякою ймовірністю (вказаною користувачем) він може стати отруйним. Після завершення збору ресурсів з куща, якщо кущ був отруйний, здобувач або помирає, або виживає (ймовірність виживання залежить від сили здобувача). Якщо здобувач їжі вижив після отруєння, він отримує зниження параметра швидкості на певну кількість тактів (вказану у внутрішніх параметрах). Отруйні кущі мають інший колір ягід на мапі. На графіку "Deaths By Type" додається новий тип смертності "від отруєння". <!-- Большая и сложная модель, в которой в прошлом году были отменные изменения - хотя и сложноватые для большинства. Взять за основу и упростить. В итоге взял примерно шестую часть от изменений прошлого года. Для "нетвореческого" этапа хватит с головой. -->
<!-- Зря Red Queen в прошлой лабе не добавил, модель жабогадюкинга может быть интересной, да и изменений там вагон, вполне несложных. -->

Виконання "чужого" варіанту можливо тільки по узгодженню з викладачем (і повинно бути відображено у журналі) і передбачає **обмін** варіантами з іншим студентом групи, згодним на це.

<br>

### 2.5 Зміст звіту
Функції звіту виконує **md-опис** роботи (який і так необхідний для відпрацювання, відповідно до пункту 5 розділу 2.3), викладений на сервісі GitHub. Для орієнтування можна використовувати [приклад](example.md).
<br>

### 2.6 Контрольні запитання
1. Які підходи у рамках імітаційного моделювання вам відомі?
1. Види агентів у середовищі NetLogo. *// далі всі питання - у контексті синтаксису середовища мультиагентного моделювання NetLogo.*
1. Як створити процедуру та функцію?
1. Як вивести повідомлення користувачеві?
1. Як встановити значення змінної?
1. Як реалізуються цикли?
1. Що описується у turtles-own та globals?
1. Навіщо використовується конструкція ask?
1. Як створити активних агентів? Які їх властивості доступні на початковому етапі? Як ідентифікувати агента? Як видалити агента з поля?
1. Як створити різнорідних активних агентів?
1. Навіщо використовується конструкція hatch?
1. Які команди використовують для переміщення агентів? Як визначається напрямок переміщення?
1. У чому різниця між random-pxcor та random-xcor?
1. Як встановити колір для ділянки імітаційного поля?
1. Як визначити наявність агента в ділянці поля за курсом руху агента?
1. Як отримати випадкове число у заданому діапазоні?
1. У чому різниця при використанні конструкцій one-of та n-of? <!-- 1. Як обрати агентів, які мають певне значення якоїсь характеристики? -->
1. Для чого використовується конструкція item?
1. Як вивести користувачеві поточну кількість активних агентів на полі?
1. Як відбувається перехід до наступного такту модельного часу?

<br>

### Корисні посилання
1. Середовище моделювання [NetLogo](http://ccl.northwestern.edu/netlogo/).
1. [NetLogo Models Library](http://ccl.northwestern.edu/netlogo/models/index.cgi) - бібліотека готових імітаційних моделей, корисна для ознайомлення на тему "як можна зробити". Доступні через десктопну версію, так і через NetLogo Web.
1. [NetLogo programming language in detail](http://ccl.northwestern.edu/netlogo/docs/programming.html#programming-guide)
1. [Beginner's Guide to NetLogo Programming](https://ccl.northwestern.edu/netlogo/bind/)
1. Посібники з розмітки Markdown: [1](https://gist.github.com/Jekins/2bf2d0638163f1294637), [2](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet), [3](https://www.markdownguide.org/basic-syntax/).
<!-- Литература по собственно моделированию здесь не нужна - вторая лаба сугубо прикладная, тут нужны указанные источники по NetLogo. И они указаны не зря! -->